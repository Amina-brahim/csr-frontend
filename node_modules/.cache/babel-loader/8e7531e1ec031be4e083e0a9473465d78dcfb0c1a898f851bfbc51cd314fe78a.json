{"ast":null,"code":"var _jsxFileName = \"/home/synaptics/Essais/client/src/components/MGLabo.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from \"react-router-dom\";\nimport LogoCsr from './images/logo_csr.png';\nimport io from \"socket.io-client\";\nimport \"./AnalysesTable.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst MgLabo = () => {\n  _s();\n  const [analyses, setAnalyses] = useState([]);\n  const [socket, setSocket] = useState(null);\n  const navigate = useNavigate();\n\n  // Convertit le code numÃ©rique en texte (pour l'affichage initial)\n  const mapLaboStatus = code => {\n    if (typeof code === 'string') return code; // DÃ©jÃ  en texte\n\n    const statusMap = {\n      0: \"En attente\",\n      1: \"En cours\",\n      2: \"TerminÃ©\",\n      3: \"AnnulÃ©\"\n    };\n    return statusMap[code] || \"En attente\";\n  };\n\n  // Convertit le texte en code numÃ©rique (pour l'envoi au serveur)\n  const mapStatusToCode = statusText => {\n    const statusMap = {\n      \"En attente\": 0,\n      \"En cours\": 1,\n      \"TerminÃ©\": 2,\n      \"AnnulÃ©\": 3\n    };\n    return statusMap[statusText] || 0;\n  };\n\n  // Fonction pour formater les examens\n  const formaterExamens = examens => {\n    if (!examens || !Array.isArray(examens)) return 'Aucun examen';\n\n    // Si c'est un tableau d'objets\n    if (examens.length > 0 && typeof examens[0] === 'object') {\n      return examens.map(examen => examen.name || 'Examen inconnu').join(', ');\n    }\n\n    // Si c'est un tableau de strings\n    return examens.join(', ');\n  };\n\n  // Fonction pour formater les services\n  const formaterServices = services => {\n    if (!services || !Array.isArray(services)) return 'Aucun service';\n\n    // Si c'est un tableau d'objets\n    if (services.length > 0 && typeof services[0] === 'object') {\n      return services.map(service => service.name || service.value || 'Service inconnu').join(', ');\n    }\n\n    // Si c'est un tableau de strings\n    return services.join(', ');\n  };\n  useEffect(() => {\n    const newSocket = io(\"http://localhost:4600\");\n    setSocket(newSocket);\n\n    // Ã‰couter les nouvelles analyses\n    newSocket.on(\"nouveau_patient\", newData => {\n      console.log(\"Nouveau patient reÃ§u:\", newData);\n      setAnalyses(prevAnalyses => {\n        // VÃ©rifie si l'analyse existe dÃ©jÃ  via numID_CSR\n        const existingIndex = prevAnalyses.findIndex(a => a.numID_CSR === newData.numID_CSR);\n        if (existingIndex >= 0) {\n          // Mise Ã  jour si le patient existe\n          const updatedAnalyses = [...prevAnalyses];\n          updatedAnalyses[existingIndex] = newData;\n          console.log(\"Patient mis Ã  jour:\", updatedAnalyses[existingIndex]);\n          return updatedAnalyses;\n        } else {\n          // Ajout cumulatif si nouveau patient\n          console.log(\"Nouveau patient ajoutÃ©:\", newData);\n          return [...prevAnalyses, newData];\n        }\n      });\n    });\n\n    // Ã‰couter les mises Ã  jour de statut du serveur\n    newSocket.on(\"Etat Analyses Mis Ã  Jour\", data => {\n      console.log(\"Mise Ã  jour reÃ§ue du serveur:\", data);\n      setAnalyses(prev => prev.map(item => {\n        if (item.numID_CSR === data.numID_CSR) {\n          console.log(\"Item mis Ã  jour:\", data);\n          return {\n            ...item,\n            ...data\n          };\n        }\n        return item;\n      }));\n    });\n\n    // Ã‰couter les erreurs\n    newSocket.on(\"error\", error => {\n      console.error(\"Erreur de socket:\", error);\n    });\n\n    // Nettoyer Ã  la dÃ©connexion\n    return () => {\n      newSocket.disconnect();\n    };\n  }, []);\n\n  // Envoie les mises Ã  jour au serveur\n  const handleStatusChange = async (numID_CSR, newStatusText) => {\n    const newCode = mapStatusToCode(newStatusText);\n    console.log(\"Changement de statut:\", {\n      numID_CSR,\n      newStatusText,\n      newCode\n    });\n\n    // Mise Ã  jour optimiste locale\n    setAnalyses(prev => prev.map(item => item.numID_CSR === numID_CSR ? {\n      ...item,\n      isLaboratorized: newStatusText\n    } : item));\n\n    // Envoi au serveur avec numID_CSR\n    try {\n      if (socket) {\n        socket.emit(\"update_status\", {\n          numID_CSR: numID_CSR,\n          isLaboratorized: newCode\n        });\n        console.log(\"Statut envoyÃ© au serveur\");\n      } else {\n        console.error(\"Socket non disponible\");\n      }\n    } catch (error) {\n      console.error(\"Erreur lors de l'envoi au serveur:\", error);\n      // Revertir en cas d'erreur\n      setAnalyses(prev => prev.map(item => item.numID_CSR === numID_CSR ? {\n        ...item,\n        isLaboratorized: item.isLaboratorized\n      } : item));\n    }\n    if (newStatusText === \"TerminÃ©\") {\n      // Suppression de l'analyse lorsqu'elle est terminÃ©e aprÃ¨s un court dÃ©lai\n      setTimeout(() => {\n        setAnalyses(prev => prev.filter(item => item.numID_CSR !== numID_CSR));\n      }, 500);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"entete TC\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"marges_logo_5px\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"logo_clinique marges_logo_5px\",\n          src: LogoCsr,\n          alt: \"Tchad\",\n          id: \"logo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"titre_entete\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"titre_entete\",\n          children: \"CSR - N'Djamena - TCHAD\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"sous_titre_entete\",\n          children: \"Laboratoire d'Analyses M\\xE9dicale\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"sous_titre_entete\",\n          children: \"File des travaux techniques\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"table-container\",\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"analyses-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"col-numero\",\n              children: \"N\\xB0 Client\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"col-nom\",\n              children: \"Nom Patient\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"col-csr\",\n              children: \"CSR ID\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"col-examens\",\n              children: \"Examens Demand\\xE9s\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"col-statut\",\n              children: \"Statut Laboratoire\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: analyses.length > 0 ? analyses.map(item => /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"patient-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"col-numero\",\n              children: item.numClient\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"col-nom\",\n              children: item.nomClient || 'Non spÃ©cifiÃ©'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"col-csr\",\n              children: item.numID_CSR\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"col-examens\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"examens-list\",\n                children: formaterExamens(item.examensSelectionnes || item.examensDetails)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"col-statut\",\n              children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                value: mapLaboStatus(item.isLaboratorized),\n                onChange: e => handleStatusChange(item.numID_CSR, e.target.value),\n                className: `etatLabo status-${mapLaboStatus(item.isLaboratorized).toLowerCase().replace(' ', '-')}`,\n                children: [\"En attente\", \"En cours\", \"TerminÃ©\", \"AnnulÃ©\"].map(option => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: option,\n                  children: option\n                }, option, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 210,\n                  columnNumber: 27\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"status-indicator\",\n                children: mapLaboStatus(item.isLaboratorized)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 19\n            }, this)]\n          }, item.numID_CSR, true, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 17\n          }, this)) : /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"td\", {\n              colSpan: \"6\",\n              className: \"no-data\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"empty-state\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"empty-icon\",\n                  children: \"\\uD83D\\uDD2C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 226,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: \"Aucune analyse en attente\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 227,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Les nouvelles analyses apparaitront ici automatiquement\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 228,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(MgLabo, \"G3vhCObLx60rHFgkGSeZHhX+HrE=\", false, function () {\n  return [useNavigate];\n});\n_c = MgLabo;\nexport default MgLabo;\nvar _c;\n$RefreshReg$(_c, \"MgLabo\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","LogoCsr","io","jsxDEV","_jsxDEV","Fragment","_Fragment","MgLabo","_s","analyses","setAnalyses","socket","setSocket","navigate","mapLaboStatus","code","statusMap","mapStatusToCode","statusText","formaterExamens","examens","Array","isArray","length","map","examen","name","join","formaterServices","services","service","value","newSocket","on","newData","console","log","prevAnalyses","existingIndex","findIndex","a","numID_CSR","updatedAnalyses","data","prev","item","error","disconnect","handleStatusChange","newStatusText","newCode","isLaboratorized","emit","setTimeout","filter","children","className","src","alt","id","fileName","_jsxFileName","lineNumber","columnNumber","numClient","nomClient","examensSelectionnes","examensDetails","onChange","e","target","toLowerCase","replace","option","colSpan","_c","$RefreshReg$"],"sources":["/home/synaptics/Essais/client/src/components/MGLabo.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate } from \"react-router-dom\";\nimport LogoCsr from './images/logo_csr.png';\nimport io from \"socket.io-client\";\nimport \"./AnalysesTable.css\";\n\nconst MgLabo = () => {\n  const [analyses, setAnalyses] = useState([]);\n  const [socket, setSocket] = useState(null);\n  const navigate = useNavigate();\n\n  // Convertit le code numÃ©rique en texte (pour l'affichage initial)\n  const mapLaboStatus = (code) => {\n    if (typeof code === 'string') return code; // DÃ©jÃ  en texte\n    \n    const statusMap = {\n      0: \"En attente\",\n      1: \"En cours\",\n      2: \"TerminÃ©\",\n      3: \"AnnulÃ©\",\n    };\n    return statusMap[code] || \"En attente\";\n  };\n\n  // Convertit le texte en code numÃ©rique (pour l'envoi au serveur)\n  const mapStatusToCode = (statusText) => {\n    const statusMap = {\n      \"En attente\": 0,\n      \"En cours\": 1,\n      \"TerminÃ©\": 2,\n      \"AnnulÃ©\": 3\n    };\n    return statusMap[statusText] || 0;\n  };\n\n  // Fonction pour formater les examens\n  const formaterExamens = (examens) => {\n    if (!examens || !Array.isArray(examens)) return 'Aucun examen';\n    \n    // Si c'est un tableau d'objets\n    if (examens.length > 0 && typeof examens[0] === 'object') {\n      return examens.map(examen => examen.name || 'Examen inconnu').join(', ');\n    }\n    \n    // Si c'est un tableau de strings\n    return examens.join(', ');\n  };\n\n  // Fonction pour formater les services\n  const formaterServices = (services) => {\n    if (!services || !Array.isArray(services)) return 'Aucun service';\n    \n    // Si c'est un tableau d'objets\n    if (services.length > 0 && typeof services[0] === 'object') {\n      return services.map(service => service.name || service.value || 'Service inconnu').join(', ');\n    }\n    \n    // Si c'est un tableau de strings\n    return services.join(', ');\n  };\n\n  useEffect(() => {\n    const newSocket = io(\"http://localhost:4600\");\n    setSocket(newSocket);\n\n    // Ã‰couter les nouvelles analyses\n    newSocket.on(\"nouveau_patient\", (newData) => {\n      console.log(\"Nouveau patient reÃ§u:\", newData);\n      setAnalyses((prevAnalyses) => {\n        // VÃ©rifie si l'analyse existe dÃ©jÃ  via numID_CSR\n        const existingIndex = prevAnalyses.findIndex(\n          (a) => a.numID_CSR === newData.numID_CSR\n        );\n\n        if (existingIndex >= 0) {\n          // Mise Ã  jour si le patient existe\n          const updatedAnalyses = [...prevAnalyses];\n          updatedAnalyses[existingIndex] = newData;\n          console.log(\"Patient mis Ã  jour:\", updatedAnalyses[existingIndex]);\n          return updatedAnalyses;\n        } else {\n          // Ajout cumulatif si nouveau patient\n          console.log(\"Nouveau patient ajoutÃ©:\", newData);\n          return [...prevAnalyses, newData];\n        }\n      });\n    });\n\n    // Ã‰couter les mises Ã  jour de statut du serveur\n    newSocket.on(\"Etat Analyses Mis Ã  Jour\", (data) => {\n      console.log(\"Mise Ã  jour reÃ§ue du serveur:\", data);\n      setAnalyses(prev => \n        prev.map(item => {\n          if (item.numID_CSR === data.numID_CSR) {\n            console.log(\"Item mis Ã  jour:\", data);\n            return { ...item, ...data };\n          }\n          return item;\n        })\n      );\n    });\n\n    // Ã‰couter les erreurs\n    newSocket.on(\"error\", (error) => {\n      console.error(\"Erreur de socket:\", error);\n    });\n\n    // Nettoyer Ã  la dÃ©connexion\n    return () => {\n      newSocket.disconnect();\n    };\n  }, []);\n\n  // Envoie les mises Ã  jour au serveur\n  const handleStatusChange = async (numID_CSR, newStatusText) => {\n    const newCode = mapStatusToCode(newStatusText);\n    \n    console.log(\"Changement de statut:\", { numID_CSR, newStatusText, newCode });\n    \n    // Mise Ã  jour optimiste locale\n    setAnalyses(prev =>\n      prev.map(item =>\n        item.numID_CSR === numID_CSR\n          ? { ...item, isLaboratorized: newStatusText }\n          : item\n      )\n    );\n    \n    // Envoi au serveur avec numID_CSR\n    try {\n      if (socket) {\n        socket.emit(\"update_status\", {\n          numID_CSR: numID_CSR,\n          isLaboratorized: newCode\n        });\n        console.log(\"Statut envoyÃ© au serveur\");\n      } else {\n        console.error(\"Socket non disponible\");\n      }\n    } catch (error) {\n      console.error(\"Erreur lors de l'envoi au serveur:\", error);\n      // Revertir en cas d'erreur\n      setAnalyses(prev =>\n        prev.map(item =>\n          item.numID_CSR === numID_CSR\n            ? { ...item, isLaboratorized: item.isLaboratorized }\n            : item\n        )\n      );\n    }\n    \n    if (newStatusText === \"TerminÃ©\") {\n      // Suppression de l'analyse lorsqu'elle est terminÃ©e aprÃ¨s un court dÃ©lai\n      setTimeout(() => {\n        setAnalyses(prev => prev.filter(item => item.numID_CSR !== numID_CSR));\n      }, 500);\n    }\n  };\n\n  return (\n    <>\n      <div className=\"entete TC\">\n        <div className=\"marges_logo_5px\">\n          <img className='logo_clinique marges_logo_5px' src={LogoCsr} alt=\"Tchad\" id=\"logo\" />\n        </div>\n        <div className='titre_entete'>\n          <h2 className='titre_entete'>CSR - N'Djamena - TCHAD</h2>\n          <h3 className='sous_titre_entete'>Laboratoire d'Analyses MÃ©dicale</h3>\n          <br />\n          <h2 className='sous_titre_entete'>File des travaux techniques</h2>\n        </div>\n      </div>\n\n      <div className=\"table-container\">\n        <table className=\"analyses-table\">\n          <thead>\n            <tr>\n              <th className=\"col-numero\">NÂ° Client</th>\n              <th className=\"col-nom\">Nom Patient</th>\n              <th className=\"col-csr\">CSR ID</th>\n\n              <th className=\"col-examens\">Examens DemandÃ©s</th>\n              <th className=\"col-statut\">Statut Laboratoire</th>\n            </tr>\n          </thead>\n          <tbody>\n            {analyses.length > 0 ? (\n              analyses.map((item) => (\n                <tr key={item.numID_CSR} className=\"patient-row\">\n                  <td className=\"col-numero\">{item.numClient}</td>\n                  <td className=\"col-nom\">{item.nomClient || 'Non spÃ©cifiÃ©'}</td>\n                  <td className=\"col-csr\">{item.numID_CSR}</td>\n                  \n                  <td className=\"col-examens\">\n                    <div className=\"examens-list\">\n                      {formaterExamens(item.examensSelectionnes || item.examensDetails)}\n                    </div>\n                    \n                  </td>\n                  <td className=\"col-statut\">\n                    <select\n                      value={mapLaboStatus(item.isLaboratorized)}\n                      onChange={(e) =>\n                        handleStatusChange(item.numID_CSR, e.target.value)\n                      }\n                      className={`etatLabo status-${mapLaboStatus(item.isLaboratorized).toLowerCase().replace(' ', '-')}`}\n                    >\n                      {[\"En attente\", \"En cours\", \"TerminÃ©\", \"AnnulÃ©\"].map(\n                        (option) => (\n                          <option key={option} value={option}>\n                            {option}\n                          </option>\n                        )\n                      )}\n                    </select>\n                    <div className=\"status-indicator\">\n                      {mapLaboStatus(item.isLaboratorized)}\n                    </div>\n                  </td>\n                </tr>\n              ))\n            ) : (\n              <tr>\n                <td colSpan=\"6\" className=\"no-data\">\n                  <div className=\"empty-state\">\n                    <span className=\"empty-icon\">ðŸ”¬</span>\n                    <h3>Aucune analyse en attente</h3>\n                    <p>Les nouvelles analyses apparaitront ici automatiquement</p>\n                  </div>\n                </td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n      </div>\n\n    </>\n  );\n};\n\nexport default MgLabo;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}